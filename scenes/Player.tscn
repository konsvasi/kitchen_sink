[gd_scene load_steps=21 format=2]

[ext_resource path="res://scripts/Player.gd" type="Script" id=1]
[ext_resource path="res://character_sprites/idle.png" type="Texture" id=2]
[ext_resource path="res://character_sprites/walk_right_1.png" type="Texture" id=3]
[ext_resource path="res://character_sprites/walk_right_2.png" type="Texture" id=4]
[ext_resource path="res://character_sprites/walk_right_3.png" type="Texture" id=5]
[ext_resource path="res://character_sprites/walk_right_4.png" type="Texture" id=6]
[ext_resource path="res://scripts/PlayerStateMachine.gd" type="Script" id=7]
[ext_resource path="res://character_sprites/walk_left_1.png" type="Texture" id=8]
[ext_resource path="res://character_sprites/walk_left_2.png" type="Texture" id=9]
[ext_resource path="res://character_sprites/walk_left_3.png" type="Texture" id=10]
[ext_resource path="res://character_sprites/walk_left_4.png" type="Texture" id=11]
[ext_resource path="res://utils/shield.png" type="Texture" id=12]
[ext_resource path="res://character_sprites/duck_2.png" type="Texture" id=13]
[ext_resource path="res://character_sprites/duck_3.png" type="Texture" id=14]
[ext_resource path="res://scenes/ThoughtBubble.tscn" type="PackedScene" id=17]

[sub_resource type="SpriteFrames" id=1]
animations = [ {
"frames": [ ExtResource( 2 ) ],
"loop": true,
"name": "idle",
"speed": 0.0
}, {
"frames": [ ExtResource( 3 ), ExtResource( 4 ), ExtResource( 5 ), ExtResource( 6 ) ],
"loop": true,
"name": "walk_right",
"speed": 10.0
}, {
"frames": [ ExtResource( 8 ), ExtResource( 9 ), ExtResource( 10 ), ExtResource( 11 ) ],
"loop": true,
"name": "walk_left",
"speed": 10.0
}, {
"frames": [ ExtResource( 2 ), ExtResource( 13 ), ExtResource( 14 ) ],
"loop": false,
"name": "duck",
"speed": 60.0
}, {
"frames": [ ExtResource( 14 ), ExtResource( 13 ), ExtResource( 2 ) ],
"loop": false,
"name": "duck_reverse",
"speed": 5.01
} ]

[sub_resource type="CapsuleShape2D" id=2]
height = 3.13357

[sub_resource type="CapsuleShape2D" id=3]
height = 15.6038

[sub_resource type="Animation" id=4]
resource_name = "guard"
loop = true
step = 0.25
tracks/0/type = "value"
tracks/0/path = NodePath("Shield/ShieldSprite:region_rect")
tracks/0/interp = 0
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.25, 0.5, 0.75, 1 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ Rect2( 0, 0, 48, 48 ), Rect2( 48, 0, 48, 48 ), Rect2( 96, 0, 48, 48 ), Rect2( 144, 0, 48, 48 ), Rect2( 0, 0, 48, 48 ) ]
}

[sub_resource type="Animation" id=5]
tracks/0/type = "value"
tracks/0/path = NodePath("AnimatedSprite:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3, 0.4 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ), Color( 0.945098, 0.282353, 0.282353, 1 ), Color( 1, 1, 1, 1 ), Color( 0.945098, 0.282353, 0.282353, 1 ), Color( 1, 1, 1, 1 ) ]
}

[node name="Player" type="KinematicBody2D"]
collision_mask = 5
script = ExtResource( 1 )

[node name="PlayerStateMachine" type="Node" parent="."]
script = ExtResource( 7 )

[node name="Camera2D" type="Camera2D" parent="."]
offset = Vector2( 0, -20 )
current = true
zoom = Vector2( 0.2, 0.2 )

[node name="AnimatedSprite" type="AnimatedSprite" parent="."]
frames = SubResource( 1 )
animation = "duck_reverse"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
position = Vector2( 0, 4.69777 )
shape = SubResource( 2 )

[node name="Area2D" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
shape = SubResource( 3 )

[node name="ThoughtBubble" parent="." instance=ExtResource( 17 )]
visible = false
position = Vector2( 0.33569, -26.8482 )

[node name="StateDebugLabel" type="Label" parent="."]
visible = false
margin_left = -20.0
margin_top = -34.0
margin_right = 21.0
margin_bottom = -20.0
text = "State"
align = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="StaggerTimer" type="Timer" parent="."]

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
anims/guard = SubResource( 4 )
anims/stagger = SubResource( 5 )

[node name="Shield" type="Area2D" parent="."]
visible = false
collision_layer = 8
collision_mask = 9

[node name="ShieldSprite" type="Sprite" parent="Shield"]
position = Vector2( 0, -7.88064 )
texture = ExtResource( 12 )
region_enabled = true
region_rect = Rect2( 144, 0, 48, 48 )
__meta__ = {
"_edit_lock_": true
}

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Shield"]
polygon = PoolVector2Array( 13.4655, 15.7848, 16.1219, 14.3681, 20.1065, 10.2064, 23.2057, 3.5654, 23.914, -5.2007, 22.4087, -9.09675, 19.6638, -13.6126, 14.9708, -18.3056, 10.8091, -20.6078, -10.0878, -21.4933, -13.0099, -19.5452, -17.6143, -15.6492, -20.2707, -11.9302, -21.9531, -9.53948, -22.8385, -6.44035, -23.9896, -0.242098, -23.724, 2.67994, -22.5729, 6.31034, -19.3852, 11.6231, -14.9579, 14.9879, -13.3641, 16.139 )
[connection signal="area_entered" from="Area2D" to="." method="_on_Area2D_area_entered"]
[connection signal="area_exited" from="Area2D" to="." method="_on_Area2D_area_exited"]
[connection signal="body_entered" from="Area2D" to="." method="_on_Area2D_body_entered"]
[connection signal="timeout" from="StaggerTimer" to="." method="_on_StaggerTimer_timeout"]
[connection signal="body_entered" from="Shield" to="." method="_on_Shield_body_entered"]
